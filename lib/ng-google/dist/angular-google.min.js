angular.module("google",["google.maps","google.templates"]),angular.module("google.maps.services.Geocoder",[]).factory("Geocoder",["$q","$timeout","google",function(e,o,r){function a(){var a=new r.maps.Geocoder;this.geocode=function(n){var t=e.defer();return o(function(){a.geocode(n,function(e,o){o==r.maps.GeocoderStatus.OK?t.resolve(e):t.reject(o)})}),t.promise}}return a}]),angular.module("google.maps.services.LatLng",[]).factory("LatLng",function(){return google.maps.LatLng}),angular.module("google.maps.controllers.Map",[]).controller("MapCtrl",["$scope","$element","$attrs","$transclude","$q","$timeout","$parse","Map","LatLng","googleMapsConfig","Map",function(e,o,r,a,n,t,s,g,l,i,g){var c=this,m=800,p={},u=[];this.start=function(){r.center&&(p.center=e.$eval(r.center)),r.zoom&&(p.zoom=e.$eval(r.zoom)),p=angular.extend(i,p),p.center=new l(p.center[0],p.center[1]);var a=this.map=new g(o.children("#map")[0],p);google.maps.event.addListener(a,"dragend",function(){if(r.onDragend){var o=s(r.onZoomChanged);o(e,{$map:this})}e.$emit("map:dragend",a)}),google.maps.event.addListener(a,"zoom_changed",function(){if(r.onZoomChanged){var o=s(r.onZoomChanged);o(e,{$map:this})}e.$emit("map:zoom_changed",a)}),google.maps.event.addListener(a,"click",function(){if(r.onClick){var o=s(r.onClick);o(e,{$map:this})}e.$emit("map:click",a)})},this.getMap=function(){var e=n.defer();return t(function(){e.resolve(c.map)},m),e.promise},this.addMarker=function(e){u.push(e)},this.getMarkers=function(){var e=n.defer();return t(function(){e.resolve(u)},m),e.promise}}]),angular.module("google.maps.services.Map",[]).factory("Map",function(){return google.maps.Map}),angular.module("google.maps.controllers.Marker",[]).controller("MarkerCtrl",["$scope","$element","$attrs","$parse","google","Marker","LatLng",function(e,o,r,a,n,t,s){var g,l=this,i={};this.start=function(o){r.position&&(i.position=e.$eval(r.position)),r.title&&(i.title=e.$eval(r.title)),i.position=new s(i.position[0],i.position[1]),g=l.marker=new t(i),o.getMap().then(function(e){g.setMap(e)}),o.addMarker(g),n.maps.event.addListener(g,"mouseover",function(){if(r.onMouseover){var o=a(r.onMouseover);o(e,{$marker:this})}e.$emit("marker:mouseover",g)}),n.maps.event.addListener(g,"click",function(){if(r.onClick){var o=a(r.onClick);o(e,{$marker:this})}e.$emit("marker:click",g)}),n.maps.event.addListener(g,"dragend",function(){if(r.onDragEnd){var o=a(r.onDragEnd);o(e,{$marker:this})}e.$emit("marker:dragend",g)})}}]),angular.module("google.maps.services.Marker",[]).factory("Marker",function(){return google.maps.Marker}),angular.module("google.maps.controllers",["google.maps.controllers.Marker","google.maps.controllers.Map"]),angular.module("google.maps.directives",["google.maps.directives.googleMaps","google.maps.directives.marker"]),angular.module("google.maps.services.google",[]).factory("google",["$window",function(e){return e.google}]),angular.module("google.maps.directives.googleMaps",[]).directive("googleMaps",function(){return{restrict:"E",transclude:!0,templateUrl:"maps/google-maps.directive.tpl.html",controller:"MapCtrl",require:"?googleMaps",link:function(e,o,r,a){a.start()}}}),angular.module("google.maps.directives.marker",[]).directive("marker",function(){return{restrict:"E",controller:"MarkerCtrl",require:["?^googleMaps","marker"],link:function(e,o,r,a){var n=a[0],t=a[1];t.start(n)}}}),angular.module("google.maps",["google.maps.controllers","google.maps.services","google.maps.directives"]).value("googleMapsConfig",{center:[-34.397,150.644],zoom:5}),angular.module("google.maps.services",["google.maps.services.Geocoder","google.maps.services.google","google.maps.services.Map","google.maps.services.LatLng","google.maps.services.Marker"]);